"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[450],{450:(e,t,s)=>{s.d(t,{R:()=>X});var a=s(5155),r=s(2115),l=s(6766),n=s(1394),d=s(2085),i=s(9434);let o=(0,d.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function c(e){let{className:t,variant:s,...r}=e;return(0,a.jsx)("div",{className:(0,i.cn)(o({variant:s}),t),...r})}var m=s(285),u=s(6695),x=s(7082),p=s(3561),h=s(8763),f=s(7223),j=s(3662),g=s(8098),N=s(8224),v=s(7390),y=s(8030),b=s(5317),w=s(6104),k=s(8856),C=s(4838),A=s(2278);let R=A.bL,S=A.l9,U=A.ZL,E=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(A.hJ,{className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...r,ref:t})});E.displayName=A.hJ.displayName;let I=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsxs)(U,{children:[(0,a.jsx)(E,{}),(0,a.jsx)(A.UC,{ref:t,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...r})]})});I.displayName=A.UC.displayName;let z=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...s})};z.displayName="AlertDialogHeader";let L=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s})};L.displayName="AlertDialogFooter";let B=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(A.hE,{ref:t,className:(0,i.cn)("text-lg font-semibold",s),...r})});B.displayName=A.hE.displayName;let D=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(A.VY,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",s),...r})});D.displayName=A.VY.displayName;let P=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(A.rc,{ref:t,className:(0,i.cn)((0,m.r)(),s),...r})});P.displayName=A.rc.displayName;let _=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(A.ZD,{ref:t,className:(0,i.cn)((0,m.r)({variant:"outline"}),"mt-2 sm:mt-0",s),...r})});_.displayName=A.ZD.displayName;var J=s(7242);let Y=J.bL,q=J.R6,F=J.Ke;var V=s(6157),Z=s(7481),T=s(2177),G=s(5594),H=s(221),M=s(7759),K=s(2523),$=s(3672);let O=G.Ik({text:G.Yj().min(1,"Comment cannot be empty.")}),W=()=>(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(k.E,{className:"h-8 w-8 rounded-full"}),(0,a.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,a.jsx)(k.E,{className:"h-3 w-24"}),(0,a.jsx)(k.E,{className:"h-3 w-48"})]})]});function Q(e){var t;let{postId:s}=e,{user:l}=(0,y.A)(),[d,i]=(0,r.useState)([]),[o,c]=(0,r.useState)(!0),u=(0,T.mN)({resolver:(0,H.u)(O),defaultValues:{text:""}});(0,r.useEffect)(()=>{let e=(0,b.P)((0,b.rJ)(w.db,"posts",s,"comments"),(0,b.My)("timestamp","asc")),t=(0,b.aQ)(e,e=>{i(e.docs.map(e=>{var t,s;return{id:e.id,...e.data(),timestamp:null!=(s=null==(t=e.data().timestamp)?void 0:t.toDate().toLocaleString())?s:new Date().toLocaleString()}})),c(!1)});return()=>t()},[s]);let x=async e=>{if(!l)return;let t=(0,b.H9)(w.db,"posts",s),a=(0,b.rJ)(w.db,"posts",s,"comments");try{await (0,b.c4)(w.db,async s=>{let r=await s.get(t);if(!r.exists())throw"Post does not exist!";let n=(r.data().commentCount||0)+1;s.update(t,{commentCount:n}),await (0,b.gS)(a,{userId:l.uid,authorName:l.displayName,authorImage:l.photoURL,text:e.text,timestamp:(0,b.O5)()})}),u.reset()}catch(e){console.error("Error adding comment: ",e)}};return(0,a.jsxs)("div",{className:"space-y-4 pt-4",children:[o?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(W,{}),(0,a.jsx)(W,{})]}):d.length>0?d.map(e=>{var t;return(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsxs)(n.eu,{className:"h-8 w-8",children:[(0,a.jsx)(n.BK,{src:e.authorImage}),(0,a.jsx)(n.q5,{children:null==(t=e.authorName)?void 0:t.charAt(0)})]}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"bg-muted rounded-lg px-3 py-2",children:[(0,a.jsx)("p",{className:"text-sm font-semibold",children:e.authorName}),(0,a.jsx)("p",{className:"text-sm",children:e.text})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:e.timestamp})]})]},e.id)}):(0,a.jsx)("p",{className:"text-sm text-muted-foreground text-center",children:"No comments yet. Be the first to comment!"}),l&&(0,a.jsx)(M.lV,{...u,children:(0,a.jsxs)("form",{onSubmit:u.handleSubmit(x),className:"flex items-center gap-2",children:[(0,a.jsxs)(n.eu,{className:"h-8 w-8",children:[(0,a.jsx)(n.BK,{src:l.photoURL||""}),(0,a.jsx)(n.q5,{children:null==(t=l.displayName)?void 0:t.charAt(0)})]}),(0,a.jsx)(M.zB,{control:u.control,name:"text",render:e=>{let{field:t}=e;return(0,a.jsx)(M.eI,{className:"flex-1",children:(0,a.jsx)(M.MJ,{children:(0,a.jsx)(K.p,{placeholder:"Write a comment...",...t})})})}}),(0,a.jsx)(m.$,{type:"submit",size:"icon",children:(0,a.jsx)($.A,{className:"h-4 w-4"})})]})})]})}function X(e){var t;let{post:s}=e,{user:d}=(0,y.A)(),{toast:i}=(0,Z.dj)(),[o,A]=(0,r.useState)(null),[U,E]=(0,r.useState)(!0),[J,T]=(0,r.useState)(s.likes||0),[G,H]=(0,r.useState)(s.commentCount||0),[M,K]=(0,r.useState)(!1),[$,O]=(0,r.useState)(!1),[W,X]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(async()=>{if(E(!0),s.userId)try{let e=(0,b.H9)(w.db,"users",s.userId),t=await (0,b.x7)(e);t.exists()?A({id:t.id,...t.data()}):A({id:s.userId,uid:s.userId,name:s.authorName||"Deleted User",avatarUrl:s.authorImage||"https://placehold.co/100x100.png"})}catch(e){console.error("Error fetching author:",e),A(null)}finally{E(!1)}else A({id:"unknown",uid:"unknown",name:s.authorName||"Anonymous User",avatarUrl:s.authorImage||"https://placehold.co/100x100.png"}),E(!1)})()},[s.userId,s.authorName,s.authorImage]),(0,r.useEffect)(()=>{if(!s.id)return;let e=(0,b.H9)(w.db,"posts",s.id),t=(0,b.aQ)(e,e=>{if(e.exists()){var t;let s=e.data();T((null==(t=s.likedBy)?void 0:t.length)||0),H(s.commentCount||0),d&&s.likedBy&&K(s.likedBy.includes(d.uid))}});return()=>t()},[s.id,d]);let ee=async()=>{if(!d||!s.id)return;let e=(0,b.H9)(w.db,"posts",s.id);M?await (0,b.mZ)(e,{likedBy:(0,b.C3)(d.uid)}):await (0,b.mZ)(e,{likedBy:(0,b.hq)(d.uid)})},et=async()=>{if(d&&s.id&&d.uid===s.userId)try{await (0,b.kd)((0,b.H9)(w.db,"posts",s.id)),i({title:"Post deleted",description:"Your post has been successfully removed."})}catch(e){console.error("Error deleting post:",e),i({variant:"destructive",title:"Error",description:"Failed to delete post."})}};return(0,a.jsxs)(u.Zp,{className:"overflow-hidden",children:[(0,a.jsxs)(u.aR,{className:"flex flex-row items-center gap-4 p-4",children:[U?(0,a.jsxs)("div",{className:"flex items-center gap-4 w-full",children:[(0,a.jsx)(k.E,{className:"h-10 w-10 rounded-full"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(k.E,{className:"h-4 w-[150px]"}),(0,a.jsx)(k.E,{className:"h-3 w-[100px]"})]})]}):o?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(n.eu,{children:[(0,a.jsx)(n.BK,{src:o.avatarUrl,alt:o.name,"data-ai-hint":"person portrait"}),(0,a.jsx)(n.q5,{children:null==(t=o.name)?void 0:t.charAt(0)})]}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"font-semibold",children:o.name}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:s.timestamp})]}),(e=>{switch(e){case"Event":return(0,a.jsx)(c,{variant:"outline",className:"bg-orange-100 text-orange-800 border-orange-200",children:e});case"For Sale":return(0,a.jsx)(c,{variant:"outline",className:"bg-blue-100 text-blue-800 border-blue-200",children:e});case"Business":return(0,a.jsxs)(c,{variant:"outline",className:"bg-purple-100 text-purple-800 border-purple-200 flex items-center gap-1",children:[(0,a.jsx)(x.A,{className:"h-3 w-3"}),e]});default:return(0,a.jsx)(c,{variant:"secondary",children:e})}})(s.category)]}):(0,a.jsxs)("div",{className:"flex items-center gap-4 w-full",children:[(0,a.jsxs)(n.eu,{children:[(0,a.jsx)(n.BK,{src:"https://placehold.co/100x100.png",alt:"Deleted User"}),(0,a.jsx)(n.q5,{children:"?"})]}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"font-semibold text-sm",children:"Deleted User"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:s.timestamp})]})]}),(null==d?void 0:d.uid)===s.userId&&(0,a.jsxs)(R,{children:[(0,a.jsxs)(C.rI,{children:[(0,a.jsx)(C.ty,{asChild:!0,children:(0,a.jsx)(m.$,{variant:"ghost",size:"icon",children:(0,a.jsx)(p.A,{className:"h-5 w-5"})})}),(0,a.jsxs)(C.SQ,{align:"end",children:[(0,a.jsx)(V.R,{postToEdit:s,onOpenChange:O,children:(0,a.jsxs)(C._2,{onSelect:e=>e.preventDefault(),children:[(0,a.jsx)(h.A,{className:"mr-2 h-4 w-4"}),(0,a.jsx)("span",{children:"Edit"})]})}),(0,a.jsx)(S,{asChild:!0,children:(0,a.jsxs)(C._2,{className:"text-destructive focus:text-destructive focus:bg-destructive/10",children:[(0,a.jsx)(f.A,{className:"mr-2 h-4 w-4"}),(0,a.jsx)("span",{children:"Delete"})]})})]})]}),(0,a.jsxs)(I,{children:[(0,a.jsxs)(z,{children:[(0,a.jsx)(B,{children:"Are you sure?"}),(0,a.jsx)(D,{children:"This action cannot be undone. This will permanently delete your post and all its comments."})]}),(0,a.jsxs)(L,{children:[(0,a.jsx)(_,{children:"Cancel"}),(0,a.jsx)(P,{onClick:et,className:"bg-destructive hover:bg-destructive/90",children:"Delete"})]})]})]})]}),(0,a.jsxs)(Y,{open:W,onOpenChange:X,children:[(0,a.jsxs)(u.Wu,{className:"p-4 pt-0",children:[(0,a.jsx)("p",{className:"whitespace-pre-wrap",children:s.text}),s.location&&(0,a.jsxs)("div",{className:"flex items-center text-sm text-muted-foreground mt-2",children:[(0,a.jsx)(j.A,{className:"h-4 w-4 mr-1"}),(0,a.jsx)("span",{children:s.location})]})]}),s.imageUrl&&(0,a.jsx)("div",{className:"relative w-full aspect-video",children:(0,a.jsx)(l.default,{src:s.imageUrl,alt:"Post image",fill:!0,className:"object-cover","data-ai-hint":"neighborhood street"})}),(0,a.jsx)(u.wL,{className:"p-2 bg-background/50",children:(0,a.jsxs)("div",{className:"flex justify-around w-full",children:[(0,a.jsxs)(m.$,{variant:"ghost",className:"flex-1 gap-2",onClick:ee,children:[(0,a.jsx)(g.A,{className:"h-5 w-5 ".concat(M?"text-red-500 fill-current":"")}),(0,a.jsx)("span",{className:"text-sm",children:J})]}),(0,a.jsx)(q,{asChild:!0,children:(0,a.jsxs)(m.$,{variant:"ghost",className:"flex-1 gap-2",children:[(0,a.jsx)(N.A,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"text-sm",children:G})]})}),(0,a.jsxs)(m.$,{variant:"ghost",className:"flex-1 gap-2",children:[(0,a.jsx)(v.A,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"text-sm",children:"Share"})]})]})}),(0,a.jsx)(F,{children:(0,a.jsx)("div",{className:"p-4 pt-0",children:(0,a.jsx)(Q,{postId:s.id})})})]})]})}},4838:(e,t,s)=>{s.d(t,{SQ:()=>u,_2:()=>x,lp:()=>p,mB:()=>h,rI:()=>c,ty:()=>m});var a=s(5155),r=s(2115),l=s(6215),n=s(3158),d=s(518),i=s(154),o=s(9434);let c=l.bL,m=l.l9;l.YJ,l.ZL,l.Pb,l.z6,r.forwardRef((e,t)=>{let{className:s,inset:r,children:d,...i}=e;return(0,a.jsxs)(l.ZP,{ref:t,className:(0,o.cn)("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",s),...i,children:[d,(0,a.jsx)(n.A,{className:"ml-auto"})]})}).displayName=l.ZP.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.G5,{ref:t,className:(0,o.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...r})}).displayName=l.G5.displayName;let u=r.forwardRef((e,t)=>{let{className:s,sideOffset:r=4,...n}=e;return(0,a.jsx)(l.ZL,{children:(0,a.jsx)(l.UC,{ref:t,sideOffset:r,className:(0,o.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...n})})});u.displayName=l.UC.displayName;let x=r.forwardRef((e,t)=>{let{className:s,inset:r,...n}=e;return(0,a.jsx)(l.q7,{ref:t,className:(0,o.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",s),...n})});x.displayName=l.q7.displayName,r.forwardRef((e,t)=>{let{className:s,children:r,checked:n,...i}=e;return(0,a.jsxs)(l.H_,{ref:t,className:(0,o.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),checked:n,...i,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(l.VF,{children:(0,a.jsx)(d.A,{className:"h-4 w-4"})})}),r]})}).displayName=l.H_.displayName,r.forwardRef((e,t)=>{let{className:s,children:r,...n}=e;return(0,a.jsxs)(l.hN,{ref:t,className:(0,o.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...n,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(l.VF,{children:(0,a.jsx)(i.A,{className:"h-2 w-2 fill-current"})})}),r]})}).displayName=l.hN.displayName;let p=r.forwardRef((e,t)=>{let{className:s,inset:r,...n}=e;return(0,a.jsx)(l.JU,{ref:t,className:(0,o.cn)("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",s),...n})});p.displayName=l.JU.displayName;let h=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.wv,{ref:t,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",s),...r})});h.displayName=l.wv.displayName},6157:(e,t,s)=>{s.d(t,{R:()=>w});var a=s(5155),r=s(2177),l=s(221),n=s(5594),d=s(285),i=s(4165),o=s(2523),c=s(8539),m=s(7759),u=s(9409),x=s(4301),p=s(3662),h=s(1394),f=s(8030),j=s(2115),g=s(5317),N=s(858),v=s(6104),y=s(7481);let b=n.Ik({text:n.Yj().min(1,"Post can't be empty.").max(500),category:n.k5(["General","Event","For Sale","Business"]),location:n.Yj().optional(),eventDate:n.Yj().optional(),eventTime:n.Yj().optional(),eventLink:n.Yj().optional()});function w(e){var t;let{children:s,preselectedCategory:n,postToEdit:w,onOpenChange:k}=e,{user:C}=(0,f.A)(),{toast:A}=(0,y.dj)(),[R,S]=(0,j.useState)(!1),[U,E]=(0,j.useState)(!1),[I,z]=(0,j.useState)(null),L=!!w,B=(0,r.mN)({resolver:(0,l.u)(b),defaultValues:{text:"",category:n||"General",location:"",eventDate:"",eventTime:"",eventLink:""}});async function D(e){if(!C)return void A({variant:"destructive",title:"Not authenticated",description:"You must be logged in to create or edit a post."});E(!0);try{let s=(null==w?void 0:w.imageUrl)||"";if(I){let e=(0,N.KR)(v.IG,"posts/".concat(C.uid,"/").concat(Date.now(),"_").concat(I.name)),t=await (0,N.D)(e,I);s=await (0,N.qk)(t.ref)}let a={...e,imageUrl:s};if(L){let e=(0,g.H9)(v.db,"posts",w.id);await (0,g.mZ)(e,a),A({title:"Post updated!",description:"Your post has been successfully updated."})}else{var t;await (0,g.gS)((0,g.rJ)(v.db,"posts"),{userId:C.uid,authorName:C.displayName||"Anonymous User",authorImage:C.photoURL||"https://placehold.co/100x100.png?text=".concat((null==(t=C.displayName)?void 0:t.charAt(0))||"A"),...a,timestamp:(0,g.O5)(),likes:0,likedBy:[],commentCount:0}),A({title:"Post created!",description:"Your post is now live."})}B.reset({text:"",category:n||"General",location:"",eventDate:"",eventTime:"",eventLink:""}),z(null),S(!1)}catch(e){console.error("Error submitting post:",e),A({variant:"destructive",title:"Error",description:"Failed to submit post."})}finally{E(!1)}}return(0,j.useEffect)(()=>{L?B.reset({text:w.text,category:w.category,location:w.location||"",eventDate:w.eventDate||"",eventTime:w.eventTime||"",eventLink:w.eventLink||""}):B.reset({text:"",category:n||"General",location:"",eventDate:"",eventTime:"",eventLink:""})},[w,n,B,L,R]),(0,a.jsxs)(i.lG,{open:R,onOpenChange:e=>{S(e),k&&k(e)},children:[(0,a.jsx)(i.zM,{asChild:!0,children:s||(0,a.jsxs)("div",{className:"flex items-center gap-4 w-full",children:[(0,a.jsxs)(h.eu,{children:[(0,a.jsx)(h.BK,{src:(null==C?void 0:C.photoURL)||"https://placehold.co/100x100.png","data-ai-hint":"person portrait"}),(0,a.jsx)(h.q5,{children:(null==C||null==(t=C.displayName)?void 0:t.charAt(0))||"U"})]}),(0,a.jsx)("div",{className:"flex-1 text-left text-muted-foreground cursor-pointer hover:bg-muted p-2 rounded-md border border-dashed",children:"What's happening in your neighborhood?"}),(0,a.jsx)(d.$,{variant:"ghost",size:"icon",children:(0,a.jsx)(x.A,{className:"h-6 w-6 text-primary"})})]})}),(0,a.jsxs)(i.Cf,{className:"sm:max-w-[525px]",children:[(0,a.jsxs)(i.c7,{children:[(0,a.jsx)(i.L3,{children:L?"Edit Post":"Create Post"}),(0,a.jsx)(i.rr,{children:L?"Make changes to your post here.":"Share an update with your neighborhood."})]}),(0,a.jsx)(m.lV,{...B,children:(0,a.jsxs)("form",{onSubmit:B.handleSubmit(D),className:"space-y-4",children:[(0,a.jsx)(m.zB,{control:B.control,name:"text",render:e=>{let{field:t}=e;return(0,a.jsxs)(m.eI,{children:[(0,a.jsx)(m.MJ,{children:(0,a.jsx)(c.T,{placeholder:"What's happening in the neighborhood?",className:"resize-none min-h-[120px]",...t})}),(0,a.jsx)(m.C5,{})]})}}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)(m.zB,{control:B.control,name:"category",render:e=>{let{field:t}=e;return(0,a.jsx)(m.eI,{children:(0,a.jsxs)(u.l6,{onValueChange:t.onChange,defaultValue:t.value,children:[(0,a.jsx)(m.MJ,{children:(0,a.jsx)(u.bq,{children:(0,a.jsx)(u.yv,{placeholder:"Select a category"})})}),(0,a.jsxs)(u.gC,{children:[(0,a.jsx)(u.eb,{value:"General",children:"General"}),(0,a.jsx)(u.eb,{value:"Event",children:"Event"}),(0,a.jsx)(u.eb,{value:"For Sale",children:"For Sale"}),(0,a.jsx)(u.eb,{value:"Business",children:"Business"})]})]})})}}),(0,a.jsx)(m.zB,{control:B.control,name:"location",render:e=>{let{field:t}=e;return(0,a.jsx)(m.eI,{children:(0,a.jsx)(m.MJ,{children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(p.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(o.p,{placeholder:"Add a location",className:"pl-8",...t})]})})})}})]}),(0,a.jsxs)(m.eI,{children:[(0,a.jsx)(m.lR,{children:"Add an image"}),(0,a.jsx)(m.MJ,{children:(0,a.jsx)(o.p,{type:"file",accept:"image/*",onChange:e=>{var t;(null==(t=e.target.files)?void 0:t[0])&&z(e.target.files[0])}})})]}),(null==w?void 0:w.imageUrl)&&!I&&(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Current image: ",(0,a.jsx)("a",{href:w.imageUrl,target:"_blank",rel:"noopener noreferrer",className:"underline",children:"view image"})]}),(0,a.jsx)(i.Es,{children:(0,a.jsx)(d.$,{type:"submit",className:"w-full",variant:"default",disabled:U,children:U?L?"Saving...":"Posting...":L?"Save Changes":"Post"})})]})})]})]})}},9409:(e,t,s)=>{s.d(t,{bq:()=>u,eb:()=>f,gC:()=>h,l6:()=>c,yv:()=>m});var a=s(5155),r=s(2115),l=s(3433),n=s(9556),d=s(7381),i=s(518),o=s(9434);let c=l.bL;l.YJ;let m=l.WT,u=r.forwardRef((e,t)=>{let{className:s,children:r,...d}=e;return(0,a.jsxs)(l.l9,{ref:t,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...d,children:[r,(0,a.jsx)(l.In,{asChild:!0,children:(0,a.jsx)(n.A,{className:"h-4 w-4 opacity-50"})})]})});u.displayName=l.l9.displayName;let x=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.PP,{ref:t,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",s),...r,children:(0,a.jsx)(d.A,{className:"h-4 w-4"})})});x.displayName=l.PP.displayName;let p=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.wn,{ref:t,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",s),...r,children:(0,a.jsx)(n.A,{className:"h-4 w-4"})})});p.displayName=l.wn.displayName;let h=r.forwardRef((e,t)=>{let{className:s,children:r,position:n="popper",...d}=e;return(0,a.jsx)(l.ZL,{children:(0,a.jsxs)(l.UC,{ref:t,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:n,...d,children:[(0,a.jsx)(x,{}),(0,a.jsx)(l.LM,{className:(0,o.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,a.jsx)(p,{})]})})});h.displayName=l.UC.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.JU,{ref:t,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...r})}).displayName=l.JU.displayName;let f=r.forwardRef((e,t)=>{let{className:s,children:r,...n}=e;return(0,a.jsxs)(l.q7,{ref:t,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...n,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(l.VF,{children:(0,a.jsx)(i.A,{className:"h-4 w-4"})})}),(0,a.jsx)(l.p4,{children:r})]})});f.displayName=l.q7.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.wv,{ref:t,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",s),...r})}).displayName=l.wv.displayName}}]);