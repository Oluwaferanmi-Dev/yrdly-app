(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[109],{704:(e,a,s)=>{"use strict";s.d(a,{B8:()=>L,UC:()=>k,bL:()=>F,l9:()=>T});var t=s(2115),r=s(5185),i=s(6081),l=s(9196),n=s(8905),d=s(3540),o=s(4315),c=s(5845),u=s(1285),h=s(5155),x="Tabs",[p,m]=(0,i.A)(x,[l.RG]),f=(0,l.RG)(),[j,v]=p(x),g=t.forwardRef((e,a)=>{let{__scopeTabs:s,value:t,onValueChange:r,defaultValue:i,orientation:l="horizontal",dir:n,activationMode:x="automatic",...p}=e,m=(0,o.jH)(n),[f,v]=(0,c.i)({prop:t,onChange:r,defaultProp:i});return(0,h.jsx)(j,{scope:s,baseId:(0,u.B)(),value:f,onValueChange:v,orientation:l,dir:m,activationMode:x,children:(0,h.jsx)(d.sG.div,{dir:m,"data-orientation":l,...p,ref:a})})});g.displayName=x;var b="TabsList",y=t.forwardRef((e,a)=>{let{__scopeTabs:s,loop:t=!0,...r}=e,i=v(b,s),n=f(s);return(0,h.jsx)(l.bL,{asChild:!0,...n,orientation:i.orientation,dir:i.dir,loop:t,children:(0,h.jsx)(d.sG.div,{role:"tablist","aria-orientation":i.orientation,...r,ref:a})})});y.displayName=b;var w="TabsTrigger",N=t.forwardRef((e,a)=>{let{__scopeTabs:s,value:t,disabled:i=!1,...n}=e,o=v(w,s),c=f(s),u=P(o.baseId,t),x=S(o.baseId,t),p=t===o.value;return(0,h.jsx)(l.q7,{asChild:!0,...c,focusable:!i,active:p,children:(0,h.jsx)(d.sG.button,{type:"button",role:"tab","aria-selected":p,"aria-controls":x,"data-state":p?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:u,...n,ref:a,onMouseDown:(0,r.m)(e.onMouseDown,e=>{i||0!==e.button||!1!==e.ctrlKey?e.preventDefault():o.onValueChange(t)}),onKeyDown:(0,r.m)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&o.onValueChange(t)}),onFocus:(0,r.m)(e.onFocus,()=>{let e="manual"!==o.activationMode;p||i||!e||o.onValueChange(t)})})})});N.displayName=w;var C="TabsContent",R=t.forwardRef((e,a)=>{let{__scopeTabs:s,value:r,forceMount:i,children:l,...o}=e,c=v(C,s),u=P(c.baseId,r),x=S(c.baseId,r),p=r===c.value,m=t.useRef(p);return t.useEffect(()=>{let e=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,h.jsx)(n.C,{present:i||p,children:s=>{let{present:t}=s;return(0,h.jsx)(d.sG.div,{"data-state":p?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":u,hidden:!t,id:x,tabIndex:0,...o,ref:a,style:{...e.style,animationDuration:m.current?"0s":void 0},children:t&&l})}})});function P(e,a){return"".concat(e,"-trigger-").concat(a)}function S(e,a){return"".concat(e,"-content-").concat(a)}R.displayName=C;var F=g,L=y,T=N,k=R},968:(e,a,s)=>{"use strict";s.d(a,{b:()=>n});var t=s(2115),r=s(3540),i=s(5155),l=t.forwardRef((e,a)=>(0,i.jsx)(r.sG.label,{...e,ref:a,onMouseDown:a=>{var s;a.target.closest("button, input, select, textarea")||(null==(s=e.onMouseDown)||s.call(e,a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));l.displayName="Label";var n=l},1835:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>y});var t=s(5155),r=s(285),i=s(6695),l=s(2523),n=s(5057),d=s(7313),o=s(8539),c=s(1394),u=s(8030),h=s(6104),x=s(5695),p=s(2115),m=s(3004),f=s(5317),j=s(858),v=s(7481),g=s(9409),b=s(9166);function y(){var e;let{user:a}=(0,u.A)(),s=(0,x.useRouter)(),{toast:y}=(0,v.dj)(),[w,N]=(0,p.useState)((null==a?void 0:a.displayName)||""),[C,R]=(0,p.useState)(""),[P,S]=(0,p.useState)(null),[F,L]=(0,p.useState)(!1),[T,k]=(0,p.useState)({state:"",lga:"",city:"",ward:""});(0,p.useEffect)(()=>{a&&((async()=>{let e=(0,f.H9)(h.db,"users",a.uid),s=await (0,f.x7)(e);if(s.exists()){let e=s.data();R(e.bio||""),e.location&&k(e.location),a.displayName||N(e.name||"")}})(),a.displayName&&N(a.displayName))},[a]);let B=(e,a)=>{let s={...T,[e]:a};"state"===e&&(s.lga="",s.city="",s.ward=""),"lga"===e&&(s.ward="",s.city=""),"lga"===e&&A(b.$q[a]||[]),k(s)},J=async()=>{if(a){L(!0);try{let e=a.photoURL;if(P){let s=(0,j.KR)(h.IG,"avatars/".concat(a.uid,"/").concat(P.name)),t=await (0,j.D)(s,P);e=await (0,j.qk)(t.ref)}await (0,m.r7)(a,{displayName:w,photoURL:e}),await (0,f.BN)((0,f.H9)(h.db,"users",a.uid),{name:w,bio:C,location:T,avatarUrl:e,email:a.email},{merge:!0}),y({title:"Profile Updated",description:"Your profile has been successfully updated."})}catch(e){console.error("Error updating profile: ",e),y({variant:"destructive",title:"Error",description:"Failed to update profile."})}finally{L(!1)}}},D=async()=>{await h.j2.signOut(),s.push("/login")},G=T.state?b.co[T.state]:[],[q,A]=(0,p.useState)([]);return(0,t.jsxs)("div",{className:"max-w-3xl mx-auto",children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold font-headline",children:"Settings"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Manage your account and preferences."})]}),(0,t.jsxs)(d.tU,{defaultValue:"profile",children:[(0,t.jsxs)(d.j7,{className:"grid w-full grid-cols-3",children:[(0,t.jsx)(d.Xi,{value:"profile",children:"Profile"}),(0,t.jsx)(d.Xi,{value:"security",children:"Security"}),(0,t.jsx)(d.Xi,{value:"notifications",children:"Notifications"})]}),(0,t.jsx)(d.av,{value:"profile",children:(0,t.jsxs)(i.Zp,{children:[(0,t.jsxs)(i.aR,{children:[(0,t.jsx)(i.ZB,{children:"Profile"}),(0,t.jsx)(i.BT,{children:"This is how others will see you on the site."})]}),(0,t.jsxs)(i.Wu,{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)(c.eu,{className:"h-20 w-20",children:[(0,t.jsx)(c.BK,{src:(null==a?void 0:a.photoURL)||"",alt:(null==a?void 0:a.displayName)||""}),(0,t.jsx)(c.q5,{children:null==a||null==(e=a.displayName)?void 0:e.charAt(0)})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(n.J,{htmlFor:"picture",children:"Profile Picture"}),(0,t.jsx)(l.p,{id:"picture",type:"file",onChange:e=>{e.target.files&&e.target.files[0]&&S(e.target.files[0])},accept:"image/*"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.J,{htmlFor:"name",children:"Name"}),(0,t.jsx)(l.p,{id:"name",value:w,onChange:e=>N(e.target.value)})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.J,{children:"Location"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(n.J,{htmlFor:"state",className:"text-xs",children:"State"}),(0,t.jsxs)(g.l6,{value:T.state||"",onValueChange:e=>B("state",e),children:[(0,t.jsx)(g.bq,{id:"state",children:(0,t.jsx)(g.yv,{placeholder:"Select your state"})}),(0,t.jsx)(g.gC,{children:b.gg.map(e=>(0,t.jsx)(g.eb,{value:e,children:e},e))})]})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(n.J,{htmlFor:"lga",className:"text-xs",children:"LGA"}),(0,t.jsxs)(g.l6,{value:T.lga||"",onValueChange:e=>B("lga",e),disabled:!T.state,children:[(0,t.jsx)(g.bq,{id:"lga",children:(0,t.jsx)(g.yv,{placeholder:"Select your LGA"})}),(0,t.jsx)(g.gC,{children:G.map(e=>(0,t.jsx)(g.eb,{value:e,children:e},e))})]})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(n.J,{htmlFor:"ward",className:"text-xs",children:"Ward"}),(0,t.jsxs)(g.l6,{value:T.ward||"",onValueChange:e=>B("ward",e),disabled:!T.lga,children:[(0,t.jsx)(g.bq,{id:"ward",children:(0,t.jsx)(g.yv,{placeholder:"Select your Ward"})}),(0,t.jsx)(g.gC,{children:q.map(e=>(0,t.jsx)(g.eb,{value:e,children:e},e))})]})]})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(n.J,{htmlFor:"city",className:"text-xs",children:"City / Town / Street"}),(0,t.jsx)(l.p,{id:"city",placeholder:"e.g. Opebi Street",value:T.city||"",onChange:e=>B("city",e.target.value)})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.J,{htmlFor:"bio",children:"Bio"}),(0,t.jsx)(o.T,{id:"bio",placeholder:"Tell us about yourself",className:"min-h-[100px] resize-none",value:C,onChange:e=>R(e.target.value)})]})]}),(0,t.jsx)(i.wL,{children:(0,t.jsx)(r.$,{onClick:J,disabled:F,children:F?"Saving...":"Save Changes"})})]})}),(0,t.jsx)(d.av,{value:"security",children:(0,t.jsxs)(i.Zp,{children:[(0,t.jsxs)(i.aR,{children:[(0,t.jsx)(i.ZB,{children:"Password"}),(0,t.jsx)(i.BT,{children:"Change your password here. After saving, you'll be logged out."})]}),(0,t.jsxs)(i.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.J,{htmlFor:"current-password",children:"Current Password"}),(0,t.jsx)(l.p,{id:"current-password",type:"password"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.J,{htmlFor:"new-password",children:"New Password"}),(0,t.jsx)(l.p,{id:"new-password",type:"password"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.J,{htmlFor:"confirm-password",children:"Confirm New Password"}),(0,t.jsx)(l.p,{id:"confirm-password",type:"password"})]})]}),(0,t.jsx)(i.wL,{children:(0,t.jsx)(r.$,{children:"Save Password"})})]})}),(0,t.jsx)(d.av,{value:"notifications",children:(0,t.jsxs)(i.Zp,{children:[(0,t.jsxs)(i.aR,{children:[(0,t.jsx)(i.ZB,{children:"Notifications"}),(0,t.jsx)(i.BT,{children:"Choose what you want to be notified about and where you receive them."})]}),(0,t.jsx)(i.Wu,{children:(0,t.jsx)(r.$,{onClick:()=>s.push("/settings/notifications"),children:"Manage Notification Settings"})})]})})]}),(0,t.jsxs)(i.Zp,{className:"mt-6 border-destructive",children:[(0,t.jsxs)(i.aR,{children:[(0,t.jsx)(i.ZB,{className:"text-destructive",children:"Logout"}),(0,t.jsx)(i.BT,{children:"Logs you out of your account on this device."})]}),(0,t.jsx)(i.wL,{children:(0,t.jsx)(r.$,{variant:"destructive",onClick:D,children:"Logout"})})]})]})}},2523:(e,a,s)=>{"use strict";s.d(a,{p:()=>l});var t=s(5155),r=s(2115),i=s(9434);let l=r.forwardRef((e,a)=>{let{className:s,type:r,...l}=e;return(0,t.jsx)("input",{type:r,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:a,...l})});l.displayName="Input"},3750:(e,a,s)=>{Promise.resolve().then(s.bind(s,1835))},5057:(e,a,s)=>{"use strict";s.d(a,{J:()=>o});var t=s(5155),r=s(2115),i=s(968),l=s(2085),n=s(9434);let d=(0,l.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(i.b,{ref:a,className:(0,n.cn)(d(),s),...r})});o.displayName=i.b.displayName},5695:(e,a,s)=>{"use strict";var t=s(8999);s.o(t,"useParams")&&s.d(a,{useParams:function(){return t.useParams}}),s.o(t,"usePathname")&&s.d(a,{usePathname:function(){return t.usePathname}}),s.o(t,"useRouter")&&s.d(a,{useRouter:function(){return t.useRouter}})},8539:(e,a,s)=>{"use strict";s.d(a,{T:()=>l});var t=s(5155),r=s(2115),i=s(9434);let l=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:a,...r})});l.displayName="Textarea"}},e=>{var a=a=>e(e.s=a);e.O(0,[2992,3644,3340,3504,1171,3190,8544,4434,2168,8441,1684,7358],()=>a(3750)),_N_E=e.O()}]);